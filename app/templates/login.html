<!-- /home/zidan/PycharmProjects/BonusHub/app/templates/login.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üîê –í—Ö–æ–¥ –≤ BonusHub 3000</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
          },
          colors: {
            cyber: {
              blue: '#00eeff',
              purple: '#a43aff',
              pink: '#ff26eb',
            }
          }
        }
      }
    }
  </script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: radial-gradient(circle at top left, #0f0c29, #302b63, #24243e);
    }
    .input-focus:focus {
      box-shadow: 0 0 0 3px rgba(164, 58, 255, 0.3);
      border-color: #a43aff;
    }
    .btn-neon {
      background: linear-gradient(90deg, #ff00cc, #3333ff);
      color: white;
      border: none;
      border-radius: 50px;
      transition: all 0.3s;
    }
    .btn-neon:hover {
      box-shadow: 0 0 10px #ff00cc, 0 0 20px #3333ff, 0 0 40px #ff00cc;
      transform: scale(1.05);
    }
    .card {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(10px);
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

  <div class="card p-8 w-full max-w-md shadow-2xl">
    <div class="text-center mb-6">
      <h1 class="text-3xl font-bold text-cyber-blue">üöÄ BonusHub</h1>
      <p class="text-cyber-purple/80 text-sm">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</p>
    </div>

    <form id="loginForm" class="space-y-5">
      <div>
        <label class="block text-cyber-blue/80 text-sm mb-1">–õ–æ–≥–∏–Ω</label>
        <input
          type="text"
          id="username"
          class="w-full bg-black border border-cyber-purple/40 rounded-lg px-4 py-3 text-white input-focus"
          placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω"
          required
        >
      </div>

      <div>
        <label class="block text-cyber-blue/80 text-sm mb-1">–ü–∞—Ä–æ–ª—å</label>
        <input
          type="password"
          id="password"
          class="w-full bg-black border border-cyber-purple/40 rounded-lg px-4 py-3 text-white input-focus"
          placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
          required
        >
      </div>

      <button type="submit" class="w-full py-3 btn-neon font-medium rounded-lg transition">
        üîê –í–æ–π—Ç–∏
      </button>

      <div id="error" class="text-red-400 text-sm text-center hidden"></div>
    </form>
  </div>

  <script>
    const API_URL = 'http://localhost:8000';

    document.getElementById('loginForm').onsubmit = async function(e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const errorEl = document.getElementById('error');

      try {
        const res = await fetch(`${API_URL}/auth/login`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: new URLSearchParams({ username, password })
        });

        if (!res.ok) throw new Error("–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å");

        const data = await res.json();
        localStorage.setItem('access_token', data.access_token);
        window.location.href = '/'; // –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É
      } catch (err) {
        errorEl.textContent = err.message;
        errorEl.classList.remove('hidden');
      }
    };

    // –ï—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–∂–µ –µ—Å—Ç—å ‚Äî –ø–µ—Ä–µ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É
    if (localStorage.getItem('access_token')) {
      window.location.href = '/';
    }
  </script>
</body>
</html>
